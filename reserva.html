<!doctype html>
<html lang="es">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Reserv√° tu turno ‚Äì Lavado a Domicilio</title>
<style>
  :root{--bg:#0f172a;--card:#111827;--muted:#9ca3af;--pri:#22c55e}
  body{font-family:system-ui,Arial;background:var(--bg);color:#fff;min-height:100vh;margin:0;display:flex;align-items:center;justify-content:center}
  .wrap{width:100%;max-width:720px;padding:20px}
  .card{background:var(--card);border:1px solid #1f2937;border-radius:16px;padding:18px}
  h1{margin:0 0 10px;font-size:22px}
  p{margin:0 0 14px;color:var(--muted)}
  label{display:block;margin:8px 0 6px;color:#e5e7eb;font-size:14px}
  input,select{width:100%;padding:10px 12px;border-radius:10px;border:1px solid #374151;background:#0b1220;color:#fff}
  .btn{margin-top:10px;display:inline-block;padding:10px 14px;border-radius:10px;border:1px solid #16a34a;background:#16a34a;color:#0b1220;font-weight:600;cursor:pointer}
  .btn.secondary{border-color:#374151;background:#111827;color:#e5e7eb}
  .slots{margin-top:10px;display:flex;flex-wrap:wrap;gap:10px}
  .slot{padding:10px 14px;border:1px solid #374151;border-radius:10px;cursor:pointer}
  .slot.sel{background:var(--pri);color:#0b1220;border-color:var(--pri);font-weight:700}
  .msg{margin-top:10px;font-size:14px}
</style>

<div class="wrap">
  <div class="card">
    <h1>Lavado a Domicilio üöó‚ú®</h1>
    <p>Eleg√≠ el d√≠a, carg√° el horario disponible y el servicio. Te confirmamos por WhatsApp.</p>

    <label>D√≠a (pr√≥ximos 14)</label>
    <select id="dia"></select>

    <button class="btn secondary" id="btnCargar">Cargar horarios</button>
    <div id="slots" class="slots"></div>

    <label>Nombre y Apellido</label>
    <input id="nombre" placeholder="Juan P√©rez">

    <label>Tel√©fono</label>
    <input id="tel" placeholder="2994...">

    <label>Direcci√≥n</label>
    <input id="dir" placeholder="Calle y n√∫mero, barrio">

    <label>Servicio</label>
    <select id="serv">
      <option>Exterior ‚Äì $15.000</option>
      <option>Interior ‚Äì $15.000</option>
      <option>Completo ‚Äì $20.000</option>
      <option>Encerado ‚Äì $12.000</option>
    </select>

    <button class="btn" id="btnSend">Reservar</button>
    <div id="msg" class="msg"></div>
  </div>
</div>

<script>
const WEBAPP_URL = 'https://script.google.com/macros/s/AKfycbzIdrsdl5F0OBXeDj7QbOCInq-vppixmdwevqXC6CnMoQREHHsL8eVz1keR3Lbc8P2yVg/exec';

const $ = (id) => document.getElementById(id);
let fechaElegida = '';
let horaElegida = '';

const dias = ['Dom','Lun','Mar','Mi√©','Jue','Vie','S√°b'];
function toISO(d){const y=d.getFullYear();const m=String(d.getMonth()+1).padStart(2,'0');const dd=String(d.getDate()).padStart(2,'0');return `${y}-${m}-${dd}`;}
function nice(d){return `${dias[d.getDay()]} ${String(d.getDate()).padStart(2,'0')}/${String(d.getMonth()+1).padStart(2,'0')}`;}

async function getSlots(fechaISO){
  try{
    const res = await fetch(`${WEBAPP_URL}?action=slots&fecha=${encodeURIComponent(fechaISO)}`);
    const data = await res.json();
    return (data.ok && Array.isArray(data.slots)) ? data.slots : [];
  }catch{ return []; }
}

// Poblamos el select con los pr√≥ximos 14 d√≠as y mostramos cu√°ntos libres hay
async function ren
